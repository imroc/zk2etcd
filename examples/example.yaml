apiVersion: apps/v1
kind: Deployment
metadata:
  name: zk2etcd
spec:
  replicas: 1
  selector:
    matchLabels:
      app: zk2etcd
  template:
    metadata:
      labels:
        app: zk2etcd
    spec:
      containers:
      - name: zk2etcd
        image: imroc/zk2etcd:1.2.1
        imagePullPolicy: Always
        command: [ "/bin/zk2etcd" ]
        args:
        - sync
        - --zookeeper-servers=zookeeper:2181
        - --zookeeper-prefix=/dubbo
        - --zookeeper-exclude-prefix=/dubbo/config
        - --etcd-servers=etcd:2379
        - --log-level=debug
        - --concurrent=50
        - --fullsync-interval=5m
        - --etcd-cacert=/certs/ca.crt
        - --etcd-cert=/certs/cert.pem
        - --etcd-key=/certs/key.pem
        - --enable-event-log
        - --redis-server=redis:6379
        - --redis-password=hello:world
